<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<!-- ========== Short bow ========== -->

	<!-- Patch stats -->

	<Operation Class="PatchOperationReplace">
		<xpath>//ThingDef[defName="Bow_Short"]/statBases/RangedWeapon_Cooldown</xpath>
		<value>
			<RangedWeapon_Cooldown>1</RangedWeapon_Cooldown>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>//ThingDef[defName="Bow_Short"]/statBases</xpath>
		<value>
			<SightsEfficiency>0.35</SightsEfficiency>
			<ShotSpread>1</ShotSpread>
			<SwayFactor>2</SwayFactor>
			<Bulk>3.00</Bulk>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>//ThingDef[defName="Bow_Short"]/verbs</xpath>
		<value>
			<verbs>
				<li Class="CombatExtended.VerbPropertiesCE">
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Projectile_Arrow_Stone</projectileDef>
					<warmupTime>1</warmupTime>
					<range>28</range>
					<soundCast>BowSmall</soundCast>
				</li>
			</verbs>
		</value>
	</Operation>

	<!-- Add comps -->

	<Operation Class="PatchOperationSequence">
  	<success>Always</success>
  	<operations>
    	<li Class="PatchOperationTest">
      	<xpath>//ThingDef[defName="Bow_Short"]/comps</xpath>
      	<success>Invert</success>
    	</li>
    	<li Class="PatchOperationAdd">
      	<xpath>//ThingDef[defName="Bow_Short"]</xpath>
      	<value>
        	<comps />
      	</value>
    	</li>
  	</operations>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>//ThingDef[defName="Bow_Short"]/comps</xpath>
		<value>
			<li Class="CombatExtended.CompProperties_AmmoUser">
				<ammoSet>AmmoSet_Arrow</ammoSet>
			</li>
			<li Class="CombatExtended.CompProperties_FireModes">
				<aiUseBurstMode>false</aiUseBurstMode>
				<aiUseAimMode>false</aiUseAimMode>
			</li>
		</value>
	</Operation>

	<!-- Add tags -->

	<Operation Class="PatchOperationAdd">
		<xpath>//ThingDef[defName="Bow_Short"]/weaponTags</xpath>
		<value>
			<li>CE_Bow</li>
		</value>
	</Operation>

	<!-- ========== Great bow ========== -->

	<!-- Patch stats -->

	<Operation Class="PatchOperationReplace">
		<xpath>//ThingDef[defName="Bow_Great"]/statBases/RangedWeapon_Cooldown</xpath>
		<value>
			<RangedWeapon_Cooldown>1</RangedWeapon_Cooldown>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>//ThingDef[defName="Bow_Great"]/statBases</xpath>
		<value>
			<SightsEfficiency>0.35</SightsEfficiency>
			<ShotSpread>1</ShotSpread>
			<SwayFactor>2</SwayFactor>
			<Bulk>5.00</Bulk>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>//ThingDef[defName="Bow_Great"]/verbs</xpath>
		<value>
			<verbs>
				<li Class="CombatExtended.VerbPropertiesCE">
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>true</hasStandardCommand>
					<projectileDef>Projectile_GreatArrow_Stone</projectileDef>
					<warmupTime>1.3</warmupTime>
					<range>33</range>
					<soundCast>BowLarge</soundCast>
				</li>
			</verbs>
		</value>
	</Operation>

	<!-- Add comps -->

	<Operation Class="PatchOperationSequence">
  	<success>Always</success>
  	<operations>
    	<li Class="PatchOperationTest">
      	<xpath>//ThingDef[defName="Bow_Great"]/comps</xpath>
      	<success>Invert</success>
    	</li>
    	<li Class="PatchOperationAdd">
      	<xpath>//ThingDef[defName="Bow_Great"]</xpath>
      	<value>
        	<comps />
      	</value>
    	</li>
  	</operations>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>//ThingDef[defName="Bow_Great"]/comps</xpath>
		<value>
			<li Class="CombatExtended.CompProperties_AmmoUser">
				<ammoSet>AmmoSet_GreatArrow</ammoSet>
			</li>
			<li Class="CombatExtended.CompProperties_FireModes">
				<aiUseBurstMode>false</aiUseBurstMode>
				<aiUseAimMode>false</aiUseAimMode>
			</li>
		</value>
	</Operation>

	<!-- Add tags -->

	<Operation Class="PatchOperationAdd">
		<xpath>//ThingDef[defName="Bow_Great"]/weaponTags</xpath>
		<value>
			<li>CE_Bow</li>
		</value>
	</Operation>

</Patch>

