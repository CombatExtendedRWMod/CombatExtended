<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- ========== Remove elite gun tag from inappropriate weapons ========== -->

  <Operation Class="PatchOperationRemove">
    <xpath>*/ThingDef[defName="Gun_LMG" or "Gun_AssaultRifle"]/weaponTags/li[.="EliteGun"]</xpath>
  </Operation>

  <!-- ========== Revolver ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_Revolver</defName>
    <statBases>
      <Mass>1.39</Mass>
      <RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
      <SightsEfficiency>0.7</SightsEfficiency>
      <ShotSpread>0.16</ShotSpread>
      <SwayFactor>1.46</SwayFactor>
      <Bulk>3</Bulk>
      <WorkToMake>7000</WorkToMake>
    </statBases>
    <costList>
      <Steel>30</Steel>
      <Component>2</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_44Magnum_FMJ</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>12</range>
      <soundCast>ShotRevolver</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>6</magazineSize>
      <reloadTime>3.5</reloadTime>
      <ammoSet>AmmoSet_44Magnum</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
    </FireModes>
    <weaponTags>
      <li>CE_Sidearm</li>
      <li>CE_AI_Pistol</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>Gunsmithing</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_Revolver"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>grip</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Autopistol ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_Autopistol</defName>
    <statBases>
      <Mass>1.11</Mass>
      <RangedWeapon_Cooldown>0.38</RangedWeapon_Cooldown>
      <SightsEfficiency>0.7</SightsEfficiency>
      <ShotSpread>0.17</ShotSpread>
      <SwayFactor>1.32</SwayFactor>
      <Bulk>2.10</Bulk>
      <WorkToMake>7000</WorkToMake>
    </statBases>
    <costList>
      <Steel>25</Steel>
      <Component>3</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_45ACP_FMJ</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>12</range>
      <soundCast>ShotAutopistol</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>7</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_45ACP</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
    </FireModes>
    <weaponTags>
      <li>CE_Sidearm</li>
      <li>CE_AI_Pistol</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>BlowbackOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_Autopistol"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>grip</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Pump Shotgun ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_PumpShotgun</defName>
    <statBases>
      <Mass>3.00</Mass>
      <RangedWeapon_Cooldown>1.0</RangedWeapon_Cooldown>
      <ShotSpread>0.14</ShotSpread>
      <SwayFactor>1.20</SwayFactor>
      <Bulk>9.0</Bulk>
      <SightsEfficiency>1</SightsEfficiency>
      <WorkToMake>9500</WorkToMake>
    </statBases>
    <costList>
      <Steel>45</Steel>
      <WoodLog>10</WoodLog>
      <Component>1</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_12Gauge_Buck</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>16</range>
      <soundCast>ShotShotgun</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>5</magazineSize>
      <reloadTime>4.25</reloadTime>
      <ammoSet>AmmoSet_12Gauge</ammoSet>
    </AmmoUser>
    <FireModes />
    <weaponTags>
      <li>CE_AI_AssaultWeapon</li>
    </weaponTags>
    <researchPrerequisite>Gunsmithing</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_PumpShotgun"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Chain Shotgun ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_ChainShotgun</defName>
    <statBases>
      <Mass>3.50</Mass>
      <RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
      <ShotSpread>0.15</ShotSpread>
      <SwayFactor>1.26</SwayFactor>
      <Bulk>6.7</Bulk>
      <SightsEfficiency>1</SightsEfficiency>
      <WorkToMake>22500</WorkToMake>
    </statBases>
    <costList>
      <Steel>40</Steel>
      <Component>3</Component>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_12Gauge_Buck</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>16</range>
      <soundCast>ShotShotgun</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
      <ticksBetweenBurstShots>15</ticksBetweenBurstShots>
    </Properties>
    <AmmoUser>
      <magazineSize>8</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_12Gauge</ammoSet>
    </AmmoUser>
    <FireModes />
    <weaponTags>
      <li>CE_AI_AssaultWeapon</li>
    </weaponTags>
    <researchPrerequisite>GasOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_ChainShotgun"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Bolt-action rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_BoltActionRifle</defName>
    <statBases>
      <Mass>4.19</Mass>
      <RangedWeapon_Cooldown>1.17</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.02</ShotSpread>
      <SwayFactor>1.68</SwayFactor>
      <Bulk>12.60</Bulk>
      <WorkToMake>12000</WorkToMake>
    </statBases>
    <costList>
      <Steel>55</Steel>
      <WoodLog>15</WoodLog>
      <Component>1</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_303British_FMJ</defaultProjectile>
      <warmupTime>1.4</warmupTime>
      <range>55</range>
      <soundCast>ShotBoltActionRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>10</magazineSize>
      <reloadTime>4.3</reloadTime>
      <ammoSet>AmmoSet_303British</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
      <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>Gunsmithing</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_BoltActionRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Assault rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_AssaultRifle</defName>
    <statBases>
      <Mass>3.26</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.07</ShotSpread>
      <SwayFactor>1.33</SwayFactor>
      <Bulk>10.03</Bulk>
      <WorkToMake>30000</WorkToMake>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <Component>5</Component>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.53</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_556x45mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>55</range>
      <burstShotCount>6</burstShotCount>
      <ticksBetweenBurstShots>4</ticksBetweenBurstShots>
      <soundCast>ShotAssaultRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>30</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_556x45mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
      <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_AssaultRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Sniper rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_SniperRifle</defName>
    <statBases>
      <Mass>7.30</Mass>
      <RangedWeapon_Cooldown>1.16</RangedWeapon_Cooldown>
      <SightsEfficiency>2.6</SightsEfficiency>
      <ShotSpread>0.05</ShotSpread>
      <SwayFactor>1.92</SwayFactor>
      <Bulk>10.92</Bulk>
      <WorkToMake>30000</WorkToMake>
    </statBases>
    <costList>
      <Steel>60</Steel>
      <Component>5</Component>
      <Chemfuel>15</Chemfuel>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_762x51mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.6</warmupTime>
      <range>75</range>
      <soundCast>ShotSniperRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>5</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_762x51mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
      <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_SniperRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Machine pistol ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_MachinePistol</defName>
    <statBases>
      <Mass>3.50</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.12</ShotSpread>
      <SwayFactor>0.99</SwayFactor>
      <Bulk>4.7</Bulk>
      <WorkToMake>29500</WorkToMake>
    </statBases>
    <costList>
      <Steel>45</Steel>
      <Component>5</Component>
    </costList>
    <Properties>
      <recoilAmount>1.35</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_9x19mmPara_FMJ</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>20</range>
      <burstShotCount>6</burstShotCount>
      <ticksBetweenBurstShots>6</ticksBetweenBurstShots>
      <soundCast>ShotMachinePistol</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>32</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_9x19mmPara</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
    </FireModes>
    <weaponTags>
      <li>CE_SMG</li>
      <li>CE_AI_AssaultWeapon</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>BlowbackOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_MachinePistol"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>grip</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Heavy SMG ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_HeavySMG</defName>
    <statBases>
      <Mass>1.40</Mass>
      <RangedWeapon_Cooldown>0.37</RangedWeapon_Cooldown>
      <SightsEfficiency>0.7</SightsEfficiency>
      <ShotSpread>0.17</ShotSpread>
      <SwayFactor>1.46</SwayFactor>
      <Bulk>3.17</Bulk>
      <WorkToMake>24500</WorkToMake>
    </statBases>
    <costList>
      <Steel>45</Steel>
      <Component>5</Component>
    </costList>
    <Properties>
      <recoilAmount>2.05</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_45ACP_FMJ</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>16</range>
      <burstShotCount>6</burstShotCount>
      <ticksBetweenBurstShots>9</ticksBetweenBurstShots>
      <soundCast>ShotHeavySMG</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>20</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_9x19mmPara</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
    </FireModes>
    <weaponTags>
      <li>CE_SMG</li>
      <li>CE_AI_AssaultWeapon</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>BlowbackOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_HeavySMG"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Incendiary launcher ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_IncendiaryLauncher</defName>
    <statBases>
      <Mass>8</Mass>
      <RangedWeapon_Cooldown>0.43</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.15</ShotSpread>
      <SwayFactor>1.8</SwayFactor>
      <Bulk>10</Bulk>
      <WorkToMake>39500</WorkToMake>
    </statBases>
    <costList>
      <Steel>65</Steel>
      <Plasteel>30</Plasteel>
      <Component>7</Component>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_30x64mmFuel_Incendiary</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>40</range>
      <burstShotCount>0</burstShotCount>
      <soundCast>ShotIncendiaryLauncher</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>14</muzzleFlashScale>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </Properties>
    <AmmoUser>
      <magazineSize>5</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_30x64mmFuel</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
      <aiAimMode>SuppressFire</aiAimMode>
    </FireModes>
    <weaponTags>
      <li>CE_AI_Rifle</li>
      <li>CE_AI_Launcher</li>
      <li>EliteGun</li>
    </weaponTags>
    <researchPrerequisite>CE_AdvancedLaunchers</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_IncendiaryLauncher"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== LMG ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_LMG</defName>
    <statBases>
      <Mass>9.12</Mass>
      <RangedWeapon_Cooldown>0.56</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.05</ShotSpread>
      <SwayFactor>1.53</SwayFactor>
      <Bulk>13.7</Bulk>
      <WorkToMake>32000</WorkToMake>
    </statBases>
    <costList>
      <Steel>85</Steel>
      <WoodLog>10</WoodLog>
      <Component>5</Component>
    </costList>
    <Properties>
      <recoilAmount>1.32</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_762x54mmR_FMJ</defaultProjectile>
      <warmupTime>1.25</warmupTime>
      <range>75</range>
      <ticksBetweenBurstShots>7</ticksBetweenBurstShots>
      <burstShotCount>10</burstShotCount>
      <soundCast>ShotMinigun</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
      <recoilPattern>Mounted</recoilPattern>
    </Properties>
    <AmmoUser>
      <magazineSize>47</magazineSize>
      <reloadTime>4.9</reloadTime>
      <ammoSet>AmmoSet_762x54mmR</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>5</aimedBurstShotCount>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
      <aiAimMode>SuppressFire</aiAimMode>
    </FireModes>
    <weaponTags>
      <li>CE_MachineGun</li>
      <li>CE_AI_Suppressive</li>
    </weaponTags>
    <researchPrerequisite>GasOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_LMG"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Improvised turret gun ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_TurretImprovised</defName>
    <statBases>
      <RangedWeapon_Cooldown>0.93</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.07</ShotSpread>
      <SwayFactor>0.82</SwayFactor>
      <Bulk>8.00</Bulk>
    </statBases>
    <Properties>
      <recoilAmount>0.76</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_556x45mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>48</range>
      <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <burstShotCount>10</burstShotCount>
      <soundCast>GunShotA</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
      <recoilPattern>Mounted</recoilPattern>
    </Properties>
    <AmmoUser>
      <magazineSize>100</magazineSize>
      <reloadTime>7.8</reloadTime>
      <spawnUnloaded>false</spawnUnloaded>
      <ammoSet>AmmoSet_556x45mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
      <noSnapshot>true</noSnapshot>
      <noSingleShot>true</noSingleShot>
    </FireModes>
  </Operation>

  <!-- ========== Minigun ========== -->

  <!-- <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_Minigun</defName>
    <statBases>
    	<Mass>39.00</Mass>
    	<RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
    	<SightsEfficiency>1</SightsEfficiency>
    	<ShotSpread>0.06</ShotSpread>
    	<SwayFactor>1.32</SwayFactor>
    	<Bulk>8.02</Bulk>
    </statBases>
    <Properties>
    	<recoilAmount>0.58</recoilAmount>
      <recoilPattern>Mounted</recoilPattern>
    	<verbClass>CombatExtended.Verb_ShootCE</verbClass>
    	<hasStandardCommand>true</hasStandardCommand>
    	<defaultProjectile>Bullet_762x51mmNATO_FMJ</defaultProjectile>
    	<warmupTime>2.1</warmupTime>
    	<range>75</range>
    	<burstShotCount>300</burstShotCount>
    	<ticksBetweenBurstShots>1</ticksBetweenBurstShots>
    	<soundCast>ShotMinigun</soundCast>
    	<soundCastTail>GunTail_Medium</soundCastTail>
    	<muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
    	<magazineSize>600</magazineSize>
    	<reloadTime>9.2</reloadTime>
    	<ammoSet>AmmoSet_762x51mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
    	<aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
    	<li>CE_AI_Suppressive</li>
    </weaponTags>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_Minigun"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>barrels</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrels</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

	<!-- Disable for player -|->

	<Operation Class="PatchOperationAttributeSet">
		<xpath>*/ThingDef[defName="Gun_Minigun"]</xpath>
		<attribute>ParentName</attribute>
		<value>BaseGun</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>*/ThingDef[defName="Gun_Minigun"]/costList</xpath>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>*/ThingDef[defName="Gun_Minigun"]/recipeMaker</xpath>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>*/ThingDef[defName="Gun_Minigun"]/statBases</xpath>
		<value>
      <MarketValue>2200</MarketValue>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>*/ThingDef[defName="Gun_Minigun"]</xpath>
		<value>
			<tradeability>Never</tradeability>
			<destroyOnDrop>True</destroyOnDrop>
			<menuHidden>True</menuHidden>
		</value>
	</Operation> -->

  <Operation Class="PatchOperationRemove">
    <xpath>*/ThingDef[defName="Gun_Minigun"]</xpath>
  </Operation>

</Patch>

